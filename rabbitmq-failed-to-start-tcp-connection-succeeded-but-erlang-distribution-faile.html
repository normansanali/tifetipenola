<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=description content="I'm a new one just start to learn and install RabbitMQ on Windows System. I install Erlang VM and RabbitMQ in custom folder, not default folder (Both of them). Then I have restarted my computer. By the wayMy Computer name is &amp;quot;NULL&amp;quot;"><meta name=generator content="Hugo 0.98.0"><meta name=robots content="index,follow,noarchive"><title>RabbitMQ failed to start, TCP connection succeeded but Erlang distribution failed &#183;</title><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/pure-min.css><!--[if lte IE 8]><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-old-ie-min.css><![endif]--><!--[if gt IE 8]><!--><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-min.css><!--<![endif]--><!--[if lte IE 8]><link rel=stylesheet href=https://assets.cdnweb.info/hugo/blackburn/css/side-menu-old-ie.css><![endif]--><!--[if gt IE 8]><!--><link rel=stylesheet href=https://assets.cdnweb.info/hugo/blackburn/css/side-menu.css><!--<![endif]--><link rel=stylesheet href=https://assets.cdnweb.info/hugo/blackburn/css/blackburn.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css><link rel=preconnect href=https://fonts.gstatic.com><link href="https://fonts.googleapis.com/css2?family=Raleway&display=swap" rel=stylesheet type=text/css><script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<link rel=stylesheet href=//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.6.0/styles/androidstudio.min.css><script async src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.6.0/highlight.min.js></script>
<script>hljs.initHighlightingOnLoad()</script><link rel="shortcut icon" href=./img/favicon.ico type=image/x-icon></head><body><div id=layout><a href=#menu id=menuLink class=menu-link><span></span></a><div id=menu><a class="pure-menu-heading brand" href=./index.html>JoltVib</a><div class=pure-menu><ul class=pure-menu-list><li class=pure-menu-item><a class=pure-menu-link href=./index.html><i class="fa fa-home fa-fw"></i>Home</a></li><li class=pure-menu-item><a class=pure-menu-link href=./post/index.html><i class="fa fa-list fa-fw"></i>Posts</a></li><li class=pure-menu-item><a class=pure-menu-link href=./sitemap.xml><i class="fa fa-user fa-fw"></i>Sitemap</a></li><li class=pure-menu-item><a class=pure-menu-link href=./index.xml><i class="fa fa-phone fa-fw"></i>RSS</a></li></ul></div><div class="pure-menu social"><ul class=pure-menu-list></ul></div><div><div class=small-print><small>&copy; 2022. All rights reserved.</small></div><div class=small-print><small>Built with&nbsp;<a href=https://gohugo.io/ target=_blank>Hugo</a></small>
<small>Theme&nbsp;<a href=https://github.com/yoshiharuyamashita/blackburn target=_blank>Blackburn</a></small></div></div></div><div id=main><div class=header><h1>RabbitMQ failed to start, TCP connection succeeded but Erlang distribution failed</h1><h2>I'm a new one just start to learn and install RabbitMQ on Windows System. I install Erlang VM and RabbitMQ in custom folder, not default folder (Both of them). Then I have restarted my computer. By the wayMy Computer name is &amp;quot;NULL&amp;quot;</h2></div><div class=content><div class=post-meta><div><i class="fa fa-calendar fa-fw"></i>
<time>13 Jul 2024, 00:00</time></div></div><p>I'm a new one just start to learn and install RabbitMQ on Windows System.</p><p>I install Erlang VM and RabbitMQ in custom folder, not default folder (Both of them).</p><p>Then I have restarted my computer.</p><p><strong>By the way，My Computer name is "NULL"</strong></p><p>I cd to the <strong>RabbitMQ/sbin</strong> folder and use command：</p><p><code>rabbitmqctl status</code></p><p>But the return message is：</p><p>Status of node rabbit@NULL ...</p><p>Error: unable to perform an operation on node 'rabbit@NULL'. Please see diagnostics information and suggestions below.</p><p>Most common reasons for this are:</p><ul><li>Target node is unreachable (e.g. due to hostname resolution, TCP connection or firewall issues)</li><li>CLI tool fails to authenticate with the server (e.g. due to CLI tool's Erlang cookie not matching that of the server)</li><li>Target node is not running</li></ul><p>In addition to the diagnostics info below:</p><ul><li>See the CLI, clustering and networking guides on <a href=# rel=noreferrer>http://rabbitmq.com/documentation.html</a> to learn more</li><li>Consult server logs on node rabbit@NULL</li></ul><p>DIAGNOSTICS</p><p>attempted to contact: [rabbit@NULL]</p><p>rabbit@NULL:</p><ul><li>connected to epmd (port 4369) on NULL</li><li>epmd reports node 'rabbit' uses port 25672 for inter-node and CLI tool traffic</li><li><p>TCP connection succeeded but Erlang distribution failed</p></li><li><p>Authentication failed (rejected by the remote node), please check the Erlang cookie</p></li></ul><p>Current node details:</p><ul><li>node name: rabbitmqcli70@NULL</li><li>effective user's home directory: C:\Users\Jerry Song</li><li>Erlang cookie hash: 51gvGHZpn0gIK86cfiS7vp==</li></ul><p>I have try to RESTART RabbitMQ, What I get is：</p><p>ERROR: node with name "rabbit" already running on "NULL"</p><p><strong>By the way，My Computer name is "NULL"</strong> <strong>And I have enable all ports in firewall.</strong></p><span class=d-none itemprop=commentCount>2</span><h2 class=mb0 data-answercount=11>11 Answers</h2><p><a href=# rel=noreferrer>https://groups.google.com/forum/#!topic/rabbitmq-users/a6sqrAUX_Fg</a> describes the problem where there is a cookie mismatch on a fresh installation of Rabbit MQ. The easy solution on windows is to synchronize the cookies</p><p>Also described here: <a href=# rel=noreferrer>http://www.rabbitmq.com/clustering.html#erlang-cookie</a></p><p>Ensure cookies are synchronized across 1, 2 and Optionally 3 below</p><li><p><code>%HOMEDRIVE%%HOMEPATH%\.erlang.cookie</code> (usually <code>C:\Users\%USERNAME%\.erlang.cookie</code> for user %USERNAME%) if both the HOMEDRIVE and HOMEPATH environment variables are set</p></li><li><p><code>%USERPROFILE%\.erlang.cookie</code> (usually <code>C:\Users\%USERNAME%\.erlang.cookie</code>) if <strong>HOMEDRIVE</strong> and <strong>HOMEPATH</strong> are not both set</p></li><li>For the RabbitMQ Windows service - <code>%USERPROFILE%\.erlang.cookie</code> (usually <code>C:\WINDOWS\system32\config\systemprofile</code>)</li><p>The cookie file used by the Windows service account and the user running CLI tools must be synchronized by copying the one from <code>C:\WINDOWS\system32\config\systemprofile</code> folder.</p><span class=d-none itemprop=commentCount>4</span><p>If you are using dedicated drive folder locations for your development tools/software in Windows10(Not the windows default location), one way you can synchronize the erlang cookie as described by <a href=# rel=noreferrer>https://www.rabbitmq.com/cli.html</a> is by copying the cookie as explained below.</p><p>Please note in my case HOMEDRIVE and HOMEPATH environment variables both are <strong>not</strong> set.</p><p>After copying the <strong>"C:\Windows\system32\config\systemprofile\.erlang.cookie"</strong> to <strong>"C:\Users\%USERNAME%\.erlang.cookie"</strong> ,</p><p>the error "tcp connection succeeded but Erlang distribution failed" is resolved.</p><p>Now I am able to use "rabbitmqctl.bat status" command successfully. Hence there is no mandatory need to install in default location to resolve this error as synchronizing cookie will resolve that error.</p><span class=d-none itemprop=commentCount>3</span><p>In my case similar issue (Authentication failed because of Erlang cookies mismatch) solved by copying <code>.erlang.cookie</code> file from <code>Windows</code> system dir - <code>C:\Windows\system32\config\systemprofile\.erlang.cookie</code> to <code>%HOMEDRIVE%%HOMEPATH%\.erlang.cookie</code> (where <code>%HOMEDRIVE%</code> was set to <code>H:</code> and <code>%HOMEPATH%</code> to <code>\</code> respectively)</p><p><strong>Quick setup TODO for Windows, Erlang OTP 24 and RabbitMQ 3.8.19</strong>:</p><li>Download & Install Erlang [<strong>OTP 24</strong>] (needs Admin rights) from: <a href=# rel=noreferrer>https://www.erlang.org/downloads</a></li><li>set <code>ERLANG_HOME</code> (should point to install dir)</li><li>Download & Install recent [<strong>3.8.19</strong>] RabbitMQ (needs Admin rights) from: <a href=# rel=noreferrer>https://github.com/rabbitmq/rabbitmq-server/releases/</a></li><li>Follow: <a href=# rel=noreferrer>https://www.rabbitmq.com/install-windows.html</a> and/or <a href=# rel=noreferrer>https://www.rabbitmq.com/install-windows-manual.html</a></li><li>set <code>RABBITMQ_SERVER</code> (should point to install dir)</li><li>update <code>%PATH%</code> by adding: <code>;%RABBITMQ_SERVER%\sbin</code></li><li>Fix Erlang-cookie issue from above, follow: <a href=# rel=noreferrer>https://www.rabbitmq.com/cli.html#erlang-cookie</a></li><li>Enable Web UI by running command: <code>%RABBITMQ_SERVER%/sbin/rabbitmq-plugins.bat enable rabbitmq_management</code></li><li>From item #8 (above) got error because of missing file: <code>%USERPROFILEDIR%/AppData/Roaming/RabbitMQ/enabled_plugins</code> -> had to create it and run <code>%RABBITMQ_SERVER%/sbin/rabbitmq-plugins.bat enable rabbitmq_management</code> again!</li><li>Run/restart on the way might be required</li><li>Finally, login to: http://localhost:15672/ (guest:guest) <a href=# rel=noreferrer><img src=https://cdn.statically.io/img/i.stack.imgur.com/WFnEc.png alt="RabbitMQ web UI" style=margin:auto;display:block;text-align:center;max-width:100%;height:auto></a></li><p>, or check by cURL: <code>curl -i -u guest:guest http://localhost:15672/api/vhosts</code> should receive response like:</p><pre class="snippet-code-html lang-html prettyprint-override"><code> HTTP/1.1 200 OK cache-control: no-cache content-length: 186 content-security-policy: script-src 'self' 'unsafe-eval' 'unsafe-inline'; object-src 'self' content-type: application/json date: Tue, 13 Jul 2021 11:21:12 GMT server: Cowboy vary: accept, accept-encoding, origin [{"cluster_state":{"rabbit@hostname":"running"},"description":"Default virtual host","metadata":{"description":"Default virtual host","tags":[]},"name":"/","tags":[],"tracing":false}]</code></pre><p>P.S. Some useful RabbitMQ CLI commands (copy-paste):</p><ul><li><code>%RABBITMQ_SERVER%/sbin/rabbitmqctl start_app</code></li><li><code>%RABBITMQ_SERVER%/sbin/rabbitmqctl stop_app</code></li><li><code>%RABBITMQ_SERVER%/sbin/rabbitmqctl status</code></li></ul><p>P.P.S. <strong>UPDATE</strong>: great article for this subject: <a href=# rel=noreferrer>https://www.journaldev.com/11655/spring-rabbitmq</a></p><span class=d-none itemprop=commentCount></span><p>How I resolved mine</p><p>It's mostly caused by cookie mismatch on a fresh installation of Rabbit MQ</p><p>follow this 2 steps</p><pre><code>1. copy the .erlang.cookie file from C:\Windows\System32\config\systemprofile paste it into C:\Users\["your user nameusername"] folder 2. run rabbitmq-service.bat stop and rabbitmq-service.bat start </code></pre><p>Done it should work now when you run 'rabbitmqctl start_app' good luck.</p><p>note if you have more than one user put it in the correct user folder</p><span class=d-none itemprop=commentCount>1</span><p>I have <strong>reinstalled the RabbitMQ</strong> in my computer by <strong>using default setup folder</strong></p><p>Then checked with the command :</p><p><code>rabbitmqctl status</code></p><p>It works now, not the problem of Erlang VM .(Means Er can install at another folder)</p><p>It will cause some problem (like this one) that I couldn't find out now if we don't use the RabbitMQ <strong>default setup require folder</strong> (C:\Program Files\RabbitMQ Server)</p><p>If anyone finds it out, I hope you can tell me why and how to fix.</p><span class=d-none itemprop=commentCount>2</span><p>In Centos.</p><li><p>add ip nodename pair to /etc/hosts on each node.</p></li><li><p>restart rabbitmq-server service on each slave node.</p></li><p>works for me.</p><span class=d-none itemprop=commentCount>2</span><p>i got error like this, i just stop my rabbitMQ with close port 25672 here syntax for linux:<br><code>kill -9 $(lsof -t -i:25672)</code></p><p>Error Images:</p><p><a href=# rel="nofollow noreferrer"><img src=https://cdn.statically.io/img/i.stack.imgur.com/lzs94.jpg alt="enter image description here" style=margin:auto;display:block;text-align:center;max-width:100%;height:auto></a></p><span class=d-none itemprop=commentCount>3</span><p>Just adding my experience if it helps others down the line.</p><p>I wrote a Powershell .ps1 script to install and configure RabbitMQ which would be used as one of the stept to provision a server with Packer.</p><p>I wrote the code on a fresh AWS W2016 Server build. It worked fine when run on the box (as administrator, from an admin PS console) but when the same code was moved over to the Packer build server, it would fall over when doing the rabbitmqctl.bat configuration steps via packer, despite both using (as far as I can tell) Administrator to run the scripts.</p><p>So this worked on the coding box:</p><pre><code>$pathvargs = {cmd.exe /c "rabbitmqctl.bat" add_user Username Password} Invoke-Command -ScriptBlock $pathvargs $pathvargs = {cmd.exe /c "rabbitmqctl.bat" set_user_tags User administrator} Invoke-Command -ScriptBlock $pathvargs $pathvargs = {cmd.exe /c "rabbitmqctl.bat" set_permissions -p "/" User "^User-.*" ".*" ".*"} Invoke-Command -ScriptBlock $pathvargs Write-Host "Did RabbitMQ" </code></pre><p>But I had to prelude this with...</p><pre><code>copy "C:\Windows\system32\config\systemprofile\.erlang.cookie" "C:\Program Files\RabbitMQ Server\rabbitmq_server-3.7.17\sbin\.erlang.cookie" copy "C:\Windows\system32\config\systemprofile\.erlang.cookie" $env:userprofile\.erlang.cookie -force </code></pre><p>... On the Packer box.</p><p>I am guessing there is some context issue going on but I'm using</p><pre><code>"winrm_username": "Administrator", </code></pre><p>in the Packer builders block, so I thought this would suffice.</p><p>TL;DR - Use the Cookie even though it works without it in some instances.</p><span class=d-none itemprop=commentCount></span><p>I have encountered the same error after installing Erlang VM and RabbitMQ using the default installation folders in Windows 10. Managed to start the management and access it via HTTP, but status failed with this error.</p><p>The cookie was fine in all folders (<code>%HOMEDRIVE%%HOMEPATH%</code>, <code>%USERPROFILE%</code>, <code>C:\WINDOWS\system32\config\systemprofile</code>).</p><p>I had to perform a restart the Windows to make it work. After restart it set up something to run at startup + asked permission to make an exception in the firewall.</p><span class=d-none itemprop=commentCount></span><p>In my case, the file was at <code>c:\\Windows\.erlang.cookie</code>, just copied it to C:\Users{USERNAME} and all works, thanks to everyone for the hits</p><span class=d-none itemprop=commentCount></span><p>Another thing to check after making sure the cookie file is in all the locations.. is to realize that you installed 32 bit Erlang.. not 64.. Happened to me. Removed 32 bit Erlang and Installed 64 and rabbitmqctl status returns expected results.</p><span class=d-none itemprop=commentCount>1</span><p class=postsid style=color:rgba(255,0,0,0)>ncG1vNJzZmirpJawrLvVnqmfpJ%2Bse6S7zGiorp2jqbawutJoa3BwZ2mGdoSOq5ibmpmpurJ5xZqgpZ2UYsGwedKtmKusXamwsXnCqKWnnZOptrC6jKysnJuVmrGmsIybrK1llae5orrGZpuiq6SntqPB06Kmp2WWlratsQ%3D%3D</p><h4><i class="fas fa-share-alt" aria-hidden=true></i>&nbsp;Share!</h4><ul class=share-buttons><li><a href="https://www.facebook.com/sharer/sharer.php?u=%2frabbitmq-failed-to-start-tcp-connection-succeeded-but-erlang-distribution-faile.html" target=_blank title="Share on Facebook"><i class="fab fa-facebook" aria-hidden=true></i><span class=sr-only>Share on Facebook</span></a></li>&nbsp;&nbsp;&nbsp;<li><a href="https://twitter.com/intent/tweet?source=%2frabbitmq-failed-to-start-tcp-connection-succeeded-but-erlang-distribution-faile.html" target=_blank title=Tweet><i class="fab fa-twitter" aria-hidden=true></i><span class=sr-only>Tweet</span></a></li>&nbsp;&nbsp;&nbsp;<li><a href="https://plus.google.com/share?url=%2frabbitmq-failed-to-start-tcp-connection-succeeded-but-erlang-distribution-faile.html" target=_blank title="Share on Google+"><i class="fab fa-google-plus" aria-hidden=true></i><span class=sr-only>Share on Google+</span></a></li>&nbsp;&nbsp;&nbsp;<li><a href="http://www.tumblr.com/share?v=3&u=%2frabbitmq-failed-to-start-tcp-connection-succeeded-but-erlang-distribution-faile.html" target=_blank title="Post to Tumblr"><i class="fab fa-tumblr" aria-hidden=true></i><span class=sr-only>Post to Tumblr</span></a></li>&nbsp;&nbsp;&nbsp;<li><a href="http://pinterest.com/pin/create/button/?url=%2frabbitmq-failed-to-start-tcp-connection-succeeded-but-erlang-distribution-faile.html" target=_blank title="Pin it"><i class="fab fa-pinterest-p" aria-hidden=true></i><span class=sr-only>Pin it</span></a></li>&nbsp;&nbsp;&nbsp;<li><a href="http://www.reddit.com/submit?url=%2frabbitmq-failed-to-start-tcp-connection-succeeded-but-erlang-distribution-faile.html" target=_blank title="Submit to Reddit"><i class="fab fa-reddit-alien" aria-hidden=true></i><span class=sr-only>Submit to Reddit</span></a></li></ul><style>ul.share-buttons{list-style:none;padding:0}ul.share-buttons li{display:inline}ul.share-buttons .sr-only{position:absolute;clip:rect(1px 1px 1px 1px);clip:rect(1px,1px,1px,1px);padding:0;border:0;height:1px;width:1px;overflow:hidden}</style><div class="prev-next-post pure-g"><div class=pure-u-1-24 style=text-align:left><a href=./rob-lowe-reveals-secrets-marriage-sheryl-berkoff.html><i class="fa fa-chevron-left"></i></a></div><div class=pure-u-10-24><nav class=prev><a href=./rob-lowe-reveals-secrets-marriage-sheryl-berkoff.html>Rob Lowe shares the secrets to his 31-year marriage with Sheryl Berkoff</a></nav></div><div class=pure-u-2-24>&nbsp;</div><div class=pure-u-10-24><nav class=next><a href=./princessjuliana.html>Princess Juliana laid to rest in the Netherlands</a></nav></div><div class=pure-u-1-24 style=text-align:right><a href=./princessjuliana.html><i class="fa fa-chevron-right"></i></a></div></div></div></div></div><script src=https://assets.cdnweb.info/hugo/blackburn/js/ui.js></script>
<script src=https://assets.cdnweb.info/hugo/blackburn/js/menus.js></script>
<script src=./js/math-code.js></script>
<script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://js.zainuddin.my.id/floating.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://js.zainuddin.my.id/tracking_server_6.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script>var _paq=window._paq=window._paq||[];_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){e="//analytics.cdnweb.info/",_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","1"]);var e,n=document,t=n.createElement("script"),s=n.getElementsByTagName("script")[0];t.async=!0,t.src=e+"matomo.js",s.parentNode.insertBefore(t,s)}()</script></body></html>